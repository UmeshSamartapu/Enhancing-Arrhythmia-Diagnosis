{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">User Management</h2>
    <a href="{% url 'admin_dashboard' %}" class="btn btn-outline-secondary rounded-pill">‚Üê Go Back</a>
  </div>

  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>#</th>
        <th>Username</th>
        <th>Email</th>
        <th>Staff</th>
        <th>Date Joined</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for user in users %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ user.username }}</td>
        <td>{{ user.email }}</td>
        <td>
          {% if user.is_staff %}
            <span class="badge bg-info">Yes</span>
          {% else %}
            No
          {% endif %}
        </td>
        <td>{{ user.date_joined }}</td>
        <td>
          <a href="{% url 'admin_user_edit' user.id %}" class="btn btn-primary btn-sm">Edit</a>
          {% if user != request.user %}
          <form method="post" action="{% url 'admin_user_delete' user.id %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Delete this user?');">Delete</button>
          </form>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="6" class="text-center">No users found.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
